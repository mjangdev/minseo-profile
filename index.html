<!doctype html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>ì¥ë¯¼ì„œ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable.min.css" />
    <style>
      body { font-family: 'Pretendard Variable'; }
      a.no-underline:hover { text-decoration: none !important; }

      /* --- Tab buttons (underline style + subtle hover) --- */
      .tab-btn {
        transition: background-color .15s ease, color .15s ease, border-color .15s ease;
        padding: 0.75rem 1.5rem; /* px-6 py-3 */
        font-size: 0.875rem;     /* text-sm */
        font-weight: 600;        /* font-semibold */
        border-bottom: 2px solid transparent;
        background: transparent;
      }
      .tab-btn[aria-selected="true"] {
        border-bottom-color: rgb(37 99 235);; /* gray-900 */
        color: rgb(37 99 235);;
      }
      .tab-btn[aria-selected="false"] { color: rgb(55 65 81); }
      .tab-btn:hover { background-color: rgb(239 246 255); /* gray-50 */ }
    </style>
  </head>
  <body class="bg-white text-gray-900">
    <main class="max-w-3xl mx-auto p-8">
      <!-- Header -->
      <section id="header" class="flex items-center gap-6 mb-10">
        <img id="profile-image" src="./myPic.png" alt="profile" class="w-24 h-24 rounded-full object-cover" />
        <div class="flex flex-col justify-end">
          <div class="flex flex-wrap items-baseline gap-2">
            <span id="profile-name" class="text-3xl font-bold leading-tight">ì¥ë¯¼ì„œ</span>
            <a href="https://gs.hs.kr" target="_blank" rel="noopener noreferrer" id="profile-title" class="no-underline text-lg font-medium text-gray-600 hover:text-blue-600 transition-colors leading-tight inline-flex items-center gap-0.5 align-baseline">
              ê²½ê¸°ê³¼í•™ê³ ë“±í•™êµ
              <svg xmlns="http://www.w3.org/2000/svg" class="tabler-icon tabler-icon-arrow-up-right w-4 h-4" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
                <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
                <path d="M17 7l-10 10" />
                <path d="M8 7h9v9" />
              </svg>
            </a>
          </div>
          <p id="profile-email" class="text-gray-500 text-sm mt-1">minseo_jang@outlook.com<br />gs24091@gs.hs.kr</p>
        </div>
      </section>

      <!-- Intro + Tabs -->
      <section class="mb-6">
        <div role="tablist" aria-label="Section selector" 
             class="grid grid-cols-5 border-b border-gray-200 text-center">
          <button class="tab-btn w-full" data-target="#sec-education" aria-selected="true">í•™ë ¥</button>
          <button class="tab-btn w-full" data-target="#sec-conference" aria-selected="false">í•™íšŒë°œí‘œ</button>
          <button class="tab-btn w-full" data-target="#sec-academic-experience" aria-selected="false">í•™ìˆ í™œë™</button>
          <button class="tab-btn w-full" data-target="#sec-social-experience" aria-selected="false">ì‚¬íšŒí™œë™</button>
          <button class="tab-btn w-full" data-target="#sec-awards" aria-selected="false">ìˆ˜ìƒê²½ë ¥</button>
        </div>
      </section>

      <!-- Sections -->
      <section id="sec-education" class="mb-10">
        <div id="education" class="space-y-2"></div>
      </section>

      <section id="sec-conference" class="mb-10 hidden">
        <div id="conference" class="space-y-2"></div>
      </section>

      <section id="sec-academic-experience" class="mb-10 hidden">
        <div id="academic-experience" class="space-y-2"></div>
      </section>

      <section id="sec-social-experience" class="mb-10 hidden">
        <div id="social-experience" class="space-y-2"></div>
      </section>

      <section id="sec-awards" class="mb-10 hidden">
        <div id="awards" class="space-y-2"></div>
      </section>
    </main>

    <script>
      async function init() {
        try {
          const response = await fetch('profile.json');
          if (!response.ok) throw new Error(`HTTP ${response.status}`);
          const data = await response.json();
          render(data);
        } catch (error) {
          console.error('Error loading profile.json:', error);
          if (location.protocol === 'file:') {
            console.info('ğŸ’¡ file:// ë¡œ ì—´ë©´ fetchê°€ ë§‰í ìˆ˜ ìˆì–´ìš”. ë¡œì»¬ ì„œë²„ë¡œ ì‹¤í–‰í•˜ì„¸ìš”.');
          }
        }
      }

      function el(tag, className = '', text = '') {
        const node = document.createElement(tag);
        if (className) node.className = className;
        if (text) node.textContent = text;
        return node;
      }

      // ğŸ”¹ í…Œë§ˆ ë§µ (ì•„ì´ì½˜ ë°•ìŠ¤ ìƒ‰ìƒ + hover ê°•ì¡° ìƒ‰ìƒ)
      const COLOR_THEMES = {
        blue:   { border: 'border-blue-400',   bg: 'bg-blue-50',   accent: 'text-blue-600' },
        green:  { border: 'border-green-400',  bg: 'bg-green-50',  accent: 'text-green-600' },
        red:    { border: 'border-red-400',    bg: 'bg-red-50',    accent: 'text-red-600' },
        purple: { border: 'border-purple-400', bg: 'bg-purple-50', accent: 'text-purple-600' },
        amber:  { border: 'border-amber-400',  bg: 'bg-amber-50',  accent: 'text-amber-600' },
        gray:   { border: 'border-black',   bg: 'bg-gray-100',   accent: 'text-gray-900' },
      };

      function getThemeClasses(themeColor) {
        const key = (themeColor || 'blue').toLowerCase();
        return COLOR_THEMES[key] || COLOR_THEMES.blue;
      }

      function renderSection(containerId, items = []) {
        const container = document.getElementById(containerId);
        if (!container) return;
        container.innerHTML = '';

        items.forEach(item => {
          const theme = getThemeClasses(item.themeColor); // â† JSONì—ì„œ themeColor ì½ê¸°

          const row = el('div', 'flex items-start gap-3 py-4');

          // ì•„ì´ì½˜ ë°•ìŠ¤: í•­ìƒ í…Œë§ˆ ë°˜ì˜ (hover ë³€í™” ì—†ìŒ)
          const iconWrap = el(
            'div',
            `w-12 h-12 rounded-xl border ${theme.border} ${theme.bg} flex items-center justify-center overflow-hidden shrink-0`
          );

          let iconEl;
          if (item.icon) {
            iconEl = document.createElement('img');
            iconEl.src = item.icon;
            iconEl.alt = item.title || 'logo';
            iconEl.className = 'w-8 h-8 object-contain transition-opacity';
            iconWrap.appendChild(iconEl);
          } else {
            iconEl = el('div', 'w-2 h-2 rounded-full bg-gray-300');
            iconWrap.appendChild(iconEl);
          }

          // ë³¸ë¬¸
          const body = el('div', 'flex-1 min-w-0');

          // 1í–‰: ì œëª©(ì¢Œ) / ê¸°ê°„(ìš°)
          const top = el('div', 'flex items-baseline justify-between gap-3');

          const left = el('div', 'flex items-center gap-0.5 min-w-0');
          let ext;
          if (item.url) {
            const a = document.createElement('a');
            a.href = item.url;
            a.target = '_blank';
            a.rel = 'noopener noreferrer';
            a.className = 'font-semibold text-gray-900 hover:no-underline truncate transition-colors';
            a.textContent = item.title || '';
            left.appendChild(a);

            ext = document.createElementNS('http://www.w3.org/2000/svg', 'svg');
            ext.setAttribute('viewBox','0 0 24 24');
            ext.setAttribute('fill','none');
            ext.setAttribute('stroke','currentColor');
            ext.setAttribute('stroke-width','2');
            ext.setAttribute('class','w-4 h-4 text-gray-600 flex-none transition-colors');
            ext.innerHTML = '<path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M17 7l-10 10"/><path d="M8 7h9v9"/>';
            left.appendChild(ext);

            // hover: ì œëª©/í™”ì‚´í‘œ ìƒ‰ë§Œ í…Œë§ˆ ê°•ì¡° (ì•„ì´ì½˜ ë°•ìŠ¤ëŠ” ë³€í™” ì—†ìŒ)
            a.addEventListener('mouseenter', () => {
              a.classList.add(theme.accent);
              ext.classList.add(theme.accent);
            });
            a.addEventListener('mouseleave', () => {
              a.classList.remove(theme.accent);
              ext.classList.remove(theme.accent);
            });
          } else {
            left.appendChild(el('h3','font-semibold text-gray-900 truncate', item.title || ''));
          }

          const right = el('div','text-sm text-gray-500 whitespace-nowrap');
          right.textContent = item.period || '';

          top.appendChild(left);
          top.appendChild(right);
          body.appendChild(top);

          // 2í–‰: ì„œë¸Œíƒ€ì´í‹€
          if (item.subtitle) {
            body.appendChild(el('p','text-gray-600 break-words', item.subtitle));
          }

          row.appendChild(iconWrap);
          row.appendChild(body);
          container.appendChild(row);
        });
      }

      function setupTabs() {
        const buttons = Array.from(document.querySelectorAll('.tab-btn'));
        const sections = ['#sec-education','#sec-conference','#sec-academic-experience','#sec-social-experience','#sec-awards'];
        function show(target) {
          sections.forEach(sel => document.querySelector(sel)?.classList.add('hidden'));
          document.querySelector(target)?.classList.remove('hidden');
          buttons.forEach(btn => btn.setAttribute('aria-selected', String(btn.dataset.target === target)));
        }
        buttons.forEach(btn => btn.addEventListener('click', () => show(btn.dataset.target)));
        show('#sec-education');
      }

      function render(data) {
        renderSection('education', data.education);
        renderSection('conference', data.conference);
        renderSection('academic-experience', data.academic_experience);
        renderSection('social-experience', data.social_experience);
        renderSection('awards', data.awards);
        setupTabs();
      }

      init();
    </script>
  </body>
</html>
